<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>specql.core documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Specql</span> <span class="project-version">0.6-alpha3</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>specql</span></div></div></li><li class="depth-2 branch current"><a href="specql.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="specql.data-types.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>data-types</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>impl</span></div></div></li><li class="depth-3 branch"><a href="specql.impl.catalog.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>catalog</span></div></a></li><li class="depth-3 branch"><a href="specql.impl.composite.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>composite</span></div></a></li><li class="depth-3 branch"><a href="specql.impl.def.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>def</span></div></a></li><li class="depth-3 branch"><a href="specql.impl.delete.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>delete</span></div></a></li><li class="depth-3 branch"><a href="specql.impl.fetch.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fetch</span></div></a></li><li class="depth-3 branch"><a href="specql.impl.insert.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>insert</span></div></a></li><li class="depth-3 branch"><a href="specql.impl.jdbc.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>jdbc</span></div></a></li><li class="depth-3 branch"><a href="specql.impl.registry.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>registry</span></div></a></li><li class="depth-3 branch"><a href="specql.impl.update.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>update</span></div></a></li><li class="depth-3 branch"><a href="specql.impl.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-3"><a href="specql.impl.where.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>where</span></div></a></li><li class="depth-2 branch"><a href="specql.op.html"><div class="inner"><span class="tree" style="top: -362px;"><span class="top" style="height: 371px;"></span><span class="bottom"></span></span><span>op</span></div></a></li><li class="depth-2 branch"><a href="specql.rel.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>rel</span></div></a></li><li class="depth-2"><a href="specql.transform.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>transform</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="specql.core.html#var-define-tables"><div class="inner"><span>define-tables</span></div></a></li><li class="depth-1"><a href="specql.core.html#var-delete.21"><div class="inner"><span>delete!</span></div></a></li><li class="depth-1"><a href="specql.core.html#var-fetch"><div class="inner"><span>fetch</span></div></a></li><li class="depth-1"><a href="specql.core.html#var-insert.21"><div class="inner"><span>insert!</span></div></a></li><li class="depth-1"><a href="specql.core.html#var-update.21"><div class="inner"><span>update!</span></div></a></li><li class="depth-1"><a href="specql.core.html#var-upsert.21"><div class="inner"><span>upsert!</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">specql.core</h1><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-define-tables"><h3>define-tables</h3><h4 class="type">macro</h4><div class="usage"><code>(define-tables db &amp; tables)</code></div><div class="doc"><pre class="plaintext">Define specs and register query info for the given tables and user defined types.
Tables are specified as ["table-name" :some.ns/table-name]. The table keys spec
is registered for the table keyword and each column is registered with its name
in the same namespace.

For example if "table-name" table has columns "id" and "name" column specs
are registered as keywords :some.ns/id and :some.ns/name respectively. The column
specs are by determined by the SQL type.

If a column is a composite that that has been previously registered, it is registered
as the composite type.</pre></div></div><div class="public anchor" id="var-delete.21"><h3>delete!</h3><div class="usage"><code>(delete! db table where)</code></div><div class="doc"><pre class="plaintext">Delete rows from table that match the given search criteria.
Returns the number of rows deleted.</pre></div></div><div class="public anchor" id="var-fetch"><h3>fetch</h3><div class="usage"><code>(fetch db table columns where)</code></div><div class="doc"><pre class="plaintext">Fetch rows from the given tables.
Db is a database connection (anything clojure.java.jdbc accepts).
Table is a namespaced keyword indicating a previously defined database table.
Columns is a set of namespaced keywords indicating the columns to fetch. A column can also be a
vector of [keyword #{columns}] where the keyword indicates a joined table and the nested set the
columns of the nested table to retrieve.
Where clause is a map of column keyword to value or comparison operator. See specql.op namespace.

Fetch returns a collection of maps.

Example:
(fetch db :employee/employees #{:employee/id :employee/name}
       {:employee/id (op/&lt;= 2)})
;; =&gt; ({:employee/id 1 :employee/name "Foo"}
;;     {:employee/id 2 :employee/name "Bar"})</pre></div></div><div class="public anchor" id="var-insert.21"><h3>insert!</h3><div class="usage"><code>(insert! db table-kw record)</code></div><div class="doc"><pre class="plaintext">Insert a record to the given table. Returns the inserted record with the
(possibly generated) primary keys added.</pre></div></div><div class="public anchor" id="var-update.21"><h3>update!</h3><div class="usage"><code>(update! db table record where)</code></div><div class="doc"><pre class="plaintext">Update matching records. Returns number of records updated.
</pre></div></div><div class="public anchor" id="var-upsert.21"><h3>upsert!</h3><div class="usage"><code>(upsert! db table &amp; keyset-record-where)</code></div><div class="doc"><pre class="plaintext">Atomically UPDATE or INSERT a record
</pre></div></div></div></body></html>